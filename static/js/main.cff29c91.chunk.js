(this.webpackJsonplister=this.webpackJsonplister||[]).push([[0],{163:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),c=t(14),o=t.n(c),u=(t(69),t(70),t(63)),l=t(17),i={};function s(e){return"object"!==typeof e?i:(e.name="string"===typeof e.name?e.name:i.name,e)}function p(e){return e.name?"".concat(e.name).concat(100*Math.random()):Math.random()}function m(e){return"string"!==typeof e||"http"===e.slice(0,4)}var f=function(e){var n=e.item,t=Object.keys(n);return t.forEach((function(e){})),a.a.createElement("li",{className:"item"},t.map((function(e){return m(n[e])?null:a.a.createElement("span",{key:p(e),className:"".concat(e)},function(e){var t="".concat(e.substring(0,1).toUpperCase()).concat(e.substring(1)).replace("_"," "),r="".concat(n[e].substring(0,1).toUpperCase()).concat(n[e].substring(1)).replace("_"," ");return m(n[e])?null:"".concat(t,":  ").concat(r)}(e))})))},g=t(16),d=t.n(g),O=t(2),v=t(62),E=t(61),h=t.n(E),b=t(30);function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:"CHANGE_GROUP_TO",group:e}}function N(e,n){return{type:"SET_NEXT_PAGE_FOR_GROUP",nextPageLink:e,groupName:n}}var G={currentGroup:null,data:{people:null,planets:null,films:null,species:null,vehicles:null,starships:null},nextPageForGroup:{people:null,planets:null,films:null,species:null,vehicles:null,starships:null},loading:!1};var y=b.createStore((function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,r=h()(n);switch(t.type){case"CHANGE_GROUP_TO":return r.currentGroup=t.group,r;case"ADD_GROUP_FROM_API":return r.data[t.groupName]=t.group,r;case"SET_NEXT_PAGE_FOR_GROUP":return r.nextPageForGroup[t.groupName]=t.nextPageLink,r;case"LOAD_MORE_TO_GROUP":return(e=r.data[t.groupName]).push.apply(e,Object(v.a)(t.nextPageData)),r;case"CHANGE_LOADING":return r.loading=t.payload,r;default:return n}}));y.dispatch(_("people"));var P=y;var j=function(){var e=Object(O.c)((function(e){return e.currentGroup})),n=Object(O.c)((function(e){return e.data})),t=Object(O.c)((function(e){return e.loading})),c=Object(O.c)((function(n){return n.nextPageForGroup[e]})),o=Object(O.b)(),i=Object(r.useState)(!1),m=Object(l.a)(i,2),g=m[0],v=m[1],E=Object(r.useState)(!0),h=Object(l.a)(E,2),b=h[0],_=h[1];Object(r.useEffect)((function(){n[e]||setTimeout((function(){_((function(e){return!e}))}),800)}),[b]);var G=Object(r.useState)({people:null,planets:null,films:null,species:null,vehicles:null,starships:null}),y=Object(l.a)(G,2),P=y[0],j=y[1],A=Object(r.useRef)(null);function R(){v(!0),console.log(c),d.a.get(c).then((function(n){!function(n){t=n.results,r=e,o(function(e,n){return{type:"LOAD_MORE_TO_GROUP",nextPageData:e,groupName:n}}(t,r)),function(e,n){o(N(e,n))}(n.next,e),v(!1);var t,r}(n.data)})).catch((function(e){return console.log("err",e)}))}return console.log("OUT nextPageForGroup is ",c),Object(r.useEffect)((function(){A.current&&(P[e]?(console.log(A.current),P[e].observe(A.current)):j((function(n){var t=Object(u.a)({},n);return t[e]=new IntersectionObserver((function(e){return function(e){console.log("CLOSURE nextPageForGroup is ",R),e.forEach((function(e){e.isIntersecting&&R()}))}(e)}),{threshold:.5}),t})))})),a.a.createElement("div",null,t?a.a.createElement("div",{className:"items-loading-screen"},"loading..."):null,a.a.createElement(a.a.Fragment,null,null!==n[e]?a.a.createElement(a.a.Fragment,null,a.a.createElement("ul",{className:"item-list"},n[e].map((function(e){return a.a.createElement(f,{key:p(e),item:s(e)})}))),c?a.a.createElement("button",{ref:A,onClick:function(){return R()},className:"load-more item"},g?"loading more...":"..."):null):t?null:a.a.createElement("div",{className:"items-loading-screen",style:{visibility:b?"visible":"hidden"}},"Please select category")))};var A=function(e){var n=e.onGroupClick,t=e.groupName;return a.a.createElement("div",{className:"group",onClick:function(){return n(t)}},t)};var R=function(){var e=Object(O.c)((function(e){return e.data})),n=Object(O.b)(),t=function(e){return n(_(e))},r=function(e){return n(function(e){return{type:"CHANGE_LOADING",payload:e}}(e))};function c(e){function a(e,a){var c=a.results;!function(e,t){n(N(e,t))}(a.next,e),function(e,t){n(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{type:"ADD_GROUP_FROM_API",group:e,groupName:n}}(e,t))}(c,e),t(e),r(!1)}r(!0);d.a.get("".concat("https://swapi.py4e.com/api/").concat(e)).then((function(n){return a(e,n.data)})).catch((function(e){return console.log("err loading from API",e)}))}function o(n){e[n]?t(n):c(n)}return a.a.createElement("div",{className:"group-list"},Object.keys(e).map((function(e){return a.a.createElement(A,{key:e,onGroupClick:o,groupName:e})})))};var k=function(){return a.a.createElement("div",{className:"interface"},a.a.createElement(R,null),a.a.createElement(j,null))};var T=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("header",{className:"app-header"},"MAY THE 4TH BE WITH YOU"),a.a.createElement(k,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(O.a,{store:P},a.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},64:function(e,n,t){e.exports=t(163)},69:function(e,n,t){},70:function(e,n,t){}},[[64,1,2]]]);
//# sourceMappingURL=main.cff29c91.chunk.js.map